import{d as F,u as V,a as A,g as L,h as O,i as x,c,w as E,T as B,o as l,j as p,r as b,k as d,v as f,l as u,b as _,t as N,F as P,n as S,m as $,e as k,p as q,q as i}from"./index-75e217ca.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-d55756f0.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-1bf97dda.js";const j=(g,e)=>{const r=g[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((v,m)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(m.bind(null,new Error("Unknown variable dynamic import: "+e)))})},z={class:"mb-5"},G={class:"text-3xl font-bold before:block before:absolute before:w-2 before:h-10 before:left-0 before:bg-cyan-500"},H={class:"w-full flex justify-center"},Q=F({__name:"page",setup(g){const e=V(),r=A(),v=L(),m=e.state.pages,R=s=>q(()=>j(Object.assign({"../components/Button.vue":()=>i(()=>import("./Button-844762d6.js"),["assets/Button-844762d6.js","assets/Button.vue_vue_type_script_setup_true_lang-d55756f0.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/Card.vue":()=>i(()=>import("./Card-ba4f89b9.js"),["assets/Card-ba4f89b9.js","assets/Card.vue_vue_type_script_setup_true_lang-1bf97dda.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/Footer.vue":()=>i(()=>import("./Footer-56bcbcd2.js"),["assets/Footer-56bcbcd2.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/FormCheck.vue":()=>i(()=>import("./FormCheck-281b3230.js"),["assets/FormCheck-281b3230.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/FormControl.vue":()=>i(()=>import("./FormControl-39409a99.js"),["assets/FormControl-39409a99.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/FormFivestar.vue":()=>i(()=>import("./FormFivestar-0a33c76f.js"),["assets/FormFivestar-0a33c76f.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/FormInfo.vue":()=>i(()=>import("./FormInfo-9e618c82.js"),["assets/FormInfo-9e618c82.js","assets/index-75e217ca.js","assets/index-b15469ea.css"]),"../components/FormSelect.vue":()=>i(()=>import("./FormSelect-e4e1b177.js"),["assets/FormSelect-e4e1b177.js","assets/index-75e217ca.js","assets/index-b15469ea.css","assets/FormSelect-8f89c724.css"])}),`../components/${s}.vue`));let h=!1;const y=(s,o,a,n)=>{},w=(s,o)=>{s.length<=0||m[o].blocks.forEach(a=>{s.forEach(n=>{a.id===n.id&&(a.hide=n.hide)})})};O(()=>{h=!0;let s=r.currentRoute.value.params.id;e.state.pageNum=parseInt(s.toString())}),x(()=>v.path,s=>{if(!r.currentRoute.value.params.id)return;let o=r.currentRoute.value.params.id;e.state.pageNum=parseInt(o.toString())});function I(){e.commit("pushPage",{router:r,num:1,force:!0})}const D=()=>{let s=e.state.pages.map(t=>t.blocks),o=[].concat.apply([],s),a=o.filter(t=>t.hide===!1).length,n=o.filter(t=>t.hide===!1&&t.completed===!0).length;e.state.progress=(n/a*100).toFixed(1)};return(s,o)=>(l(),c(B,{tag:"Card"},{default:E(()=>[(l(!0),p(P,null,b(u(m),(a,n)=>d((l(),c(M,{key:n},{default:E(()=>[_("form",null,[_("div",z,[_("h2",G,N(a.title),1),(l(!0),p(P,null,b(a.blocks,t=>(l(),p("div",{class:S(["my-4 question",{"form-hide need-toggle-hide":t.hide}]),ref_for:!0,ref:T=>y(T,n,t.id,"")},[(l(),c($(R(t.component)),{block:t,index:n,onToggleChildren:w,onCountProgress:D},null,40,["block","index"]))],2))),256))]),_("div",H,[d(k(C,{msg:"下一頁",class:"",onClick:o[0]||(o[0]=t=>u(e).commit("pushPage",{router:u(r),num:1}))},null,512),[[f,u(e).state.pageNum<u(e).state.pages.length]]),d(k(C,{msg:"送出",class:"w-60",onClick:o[1]||(o[1]=t=>I())},null,512),[[f,u(e).state.pageNum>=u(e).state.pages.length]])])])]),_:2},1024)),[[f,u(e).state.pageNum==n+1]])),128))]),_:1}))}});export{Q as default};
